<profile>
	<id>dependency-track</id>
	<activation>
		<activeByDefault>false</activeByDefault>
	</activation>
	<properties>
		<!-- versions -->
		<version.io.github.pmckeown.dependencytrack>1.0.0</version.io.github.pmckeown.dependencytrack>
		<version.org.cyclonedx.maven>2.5.3</version.org.cyclonedx.maven>
		<!-- configuration -->
		<dependencytrack.serverurl>https://dependencytrack.cloudinfra.dev.leonardo</dependencytrack.serverurl>
	</properties>
	<build>
		<plugins>
			<!-- BOM creation -->
			<plugin>
				<groupId>org.cyclonedx</groupId>
				<artifactId>cyclonedx-maven-plugin</artifactId>
				<version>${version.org.cyclonedx.maven}</version>
				<executions>
					<execution>
						<phase>process-resources</phase>
						<goals>
							<goal>makeAggregateBom</goal>
						</goals>
					</execution>
				</executions>
				<configuration>
					<projectType>library</projectType>
					<schemaVersion>1.3</schemaVersion>
					<includeBomSerialNumber>true</includeBomSerialNumber>
					<includeCompileScope>true</includeCompileScope>
					<includeProvidedScope>true</includeProvidedScope>
					<includeRuntimeScope>true</includeRuntimeScope>
					<includeSystemScope>true</includeSystemScope>
					<includeTestScope>false</includeTestScope>
					<includeLicenseText>false</includeLicenseText>
					<outputFormat>all</outputFormat>
					<outputName>bom</outputName>
				</configuration>
			</plugin>
			<!-- BOM upload to dependency track -->
			<plugin>
				<groupId>io.github.pmckeown</groupId>
				<artifactId>dependency-track-maven-plugin</artifactId>
				<version>${version.io.github.pmckeown.dependencytrack}</version>
				<configuration>
					<dependencyTrackBaseUrl>${dependencytrack.serverurl}</dependencyTrackBaseUrl>
					<apiKey>${dependencyTrackApiKey}</apiKey>
					<dependency-track.projectName>${dependencyTrack.projectName}</dependency-track.projectName>
					<dependency-track.projectVersion>${project.version}</dependency-track.projectVersion>
				</configuration>
				<executions>
					<execution>
						<id>upload</id>
						<phase>verify</phase>
						<goals>
							<goal>upload-bom</goal>
							<goal>metrics</goal>
						</goals>
					</execution>
				</executions>
			</plugin>
		</plugins>
	</build>
</profile>